{% extends "base.html" %}
{% block body %}
  
{# Form error notifications. #}
{% if form.errors %}
  <div class="container">
    {% for field_name, field_errors in form.errors|dictsort
        if field_errors %}
      {% for error in field_errors %}
        <div class="alert alert-danger alert-dismissable"
          role="alert">
          <button type="button" class="close"
              data-dismiss="alert">
            <span class="glyphicon glyphicon-remove"
                aria-hidden="true">
            </span>
            <span class="sr-only">
              Dismiss
            </span>
          </button>
          {{ form[field_name].label }}: {{ error }}
        </div> {# end alert #}
      {% endfor %}
    {% endfor %}
  </div> {# end container #}
{% endif %}
  
{% if post.pictures %}
  <div class="container-fluid">
    <div class="row">
      {% for pic in post.pictures %}
        <img src="/static/uploads/{{ '{}/{}/{}'.format(post.user_id,
            post.id, pic.filename) }}" alt="{{ pic.filename }}" class="image">
      {% endfor %}
    </div>
  </div>
{% endif %}

<div class="container">
  <div class="row">
    <form action="/edit/{{ post.id }}" method=post
        enctype="multipart/form-data" accept-charset="utf-8">
      {{ form.hidden_tag() }}
      <div class="form-group">
        {{ form.pics.label }}
        {{ form.pics(multiple="") }}
      </div>
      <div class="form-group">
        {{ form.title.label }}
        {{ form.title(class_="form-control", size=40) }}
      </div>
      <div class="form-group">
        {{ form.subtitle.label }}
        {{ form.subtitle(class_="form-control", size=40) }}
      </div>
      <div class="form-group">
        {{ form.body.label }}
        {{ form.body(class_="form-control") }}
      </div>
      {{ form.submit(class_="btn btn-default") }}
    </form>
  </div> {# end row #}
</div> {# end container #}

{# Footer import. #}
{% include 'footer.html' %}
{# Galleria JavaScript import. #}
<script type="text/javascript" charset="utf-8"
    src="../static/galleria/galleria-1.4.2.min.js"></script>
{# Custom JavaScript import. #}
<script type="text/javascript" charset="utf-8"
    src="../static/js/edit-post.js"></script>

{% endblock %}
